<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ódio Salgado</title>
  <link rel="stylesheet" href="style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400..900&family=Metal+Mania&family=Smooch+Sans:wght@100..900&display=swap"
    rel="stylesheet">
</head>

<body>
  <main id="tela" class="inicio">
    <h1 id="tit_principal">Ódio Salgado</h1>
    <div class="botoes-inicio">
      <button type="button" id="jogar" onclick="trocaFundo('entrada_if'); vaiPara('cena1')"
        class="botao-inicio">Jogar</button>
      <button type="button" id="creditos" class="botao-inicio">Créditos</button>
      <button type="button" id="personagens" class="botao-inicio">Personagens</button>
    </div>
  </main>

  <div id="cena1-0" class="cenas">
    <div class="hud">
      <p class="dialogo">Ao chegar no IFRS, em uma manhã ensolarada, com uma clara intenção em mente: se tornar o
        presidente do grêmio estudantil da escola, porém, para isso será necessário conseguir votos, assim que
        você entra na instituição, você nota que o lugar mais movimentados é o pátio da escola</p>
      <button type="button" onclick="trocaFundo('patio');vaiPara(aleatEntre(cenas.patio));"
    class="botao-passar">Patio</button>
    <button type="button" onclick="trocaFundo('sala');vaiPara(aleatEntre(cenas.sala))"
    class="botao-passar">Puta q pariu</button>
    </div>
  </div>

  <!--Cenas-->
  <section class="cenas">
    <div id="patio-0">
      <div class="hud"> 
        <p class="dialogo">Você volta para o pátio, e percebe um novo aluno que pode ser convencido a votar em você: </p>
        <div class="bot-opc">
          <button type="button" onclick="vaiPara('alanpa-0')" class="opcao">Alan Patrick</button>
        </div>
      </div>
    </div>
    <div id="sala-0">
      <div class="hud">
        <p class="dialogo">Você percebe que existe mais 2 pessoas disponíveis para conversar na sala: </p>
        <div class="bot-opc">
            <button type="button" onclick="vaiPara(naoSorteados(cenas.sala,1))" class="opcao"><span id="nome1"></span></button>
            <button type="button" onclick="vaiPara(naoSorteados(cenas.sala,2))" class="opcao"><span id="nome2"></span></button>
        </div>
      </div>
    </div>
  </section>

  <!--Personagens pátio-->
  <section class="messi">
    <div id="messi-sair"><img src="images/messi.png" alt="Messi" class="personagem">
      <div class="hud">
        <p class="dialogo">é isso então, valeu</p>
        <div class="bot-opc">
          <button type="button" onclick="vaiPara('patio')" class="opcao">Voltar para o pátio</button>
        </div>
      </div>
    </div>
    <div id="messi-0"><img src="images/messi.png" alt="Messi" class="personagem">
      <div class="hud">
        <p class="dialogo">aidawindiwaubdnawiudbnowaibdw</p>
        <div class="bot-opc">
          <button type="button" onclick="vaiPara('messi-1')" class="opcao">cu gigante</button>
          <button type="button" onclick="vaiPara('messi-sair')" class="opcao">vitor come merda</button>
        </div>
      </div>
    </div>
    <div id="messi-1"><img src="images/messi.png" alt="messi" class="personagem">
      <div class="hud">
        <p class="dialogo">cuzao enorme</p>
        <div class="bot-opc">
          <button type="button" onclick="vaiPara('messi-3')" class="opcao">verdade</button>
          <button type="button" onclick="vaiPara('messi-sair')" class="opcao">te digo mentira</button>
        </div>
      </div>
    </div>
  </section>

  <!--falta o davi britto-->

  <!--Personagens sala de aula-->
  <section class="gustavo">
    <div id="gustavo-sair">
      <img src="images/gustavo.png" alt="Gustavo" class="personagem" />
      <div class="hud">
        <p class="dialogo">
          Beleza então, até mais tarde!
        </p>
        <div class="bot-opc">
          <button type="button" onclick="vaiPara('sala-0')" class="opcao">
            Voltar para a sala
          </button>
        </div>
      </div>
    </div>
    <div id="gustavo-0" class="cenas">
      <img src="images/gustavo.png" alt="Gustavo" class="personagem" />
      <div class="hud">
        <p class="dialogo">
          Fala aí, candidato. Vai sentar aqui mesmo? Cuidado, essa fileira é
          território dos desinteressados.
        </p>
        <div class="bot-opc">
          <button type="button" onclick="vaiPara('gustavo-1')" class="opcao">
            Relaxa, só tô esperando o professor começar pra fingir que presto
            atenção.
          </button>
          <button type="button" onclick="vaiPara('gustavo-2')" class="opcao">
            Você devia tentar prestar atenção, talvez aprenda algo novo.
          </button>
        </div>
      </div>
    </div>

    <div id="gustavo-1" class="cenas">
      <img src="images/gustavo.png" alt="Gustavo" class="personagem" />
      <div class="hud">
        <p class="dialogo">Justo. O truque é balançar a cabeça de vez em quando e parecer interessado.</p>
        <div class="bot-opc">
          <button type="button" onclick="vaiPara('gustavo-3')" class="opcao">
            É verdade, o que acha das eleições para o Grêmio Estudantil?
          </button>
          <button type="button" onclick="vaiPara('gustavo-sair')" class="opcao">
            É mesmo, acho que o professor já está chegando, vou me sentar.
          </button>
        </div>
      </div>
    </div>

    <div id="gustavo-2" class="cenas">
      <img src="images/gustavo.png" alt="Gustavo" class="personagem" />
      <div class="hud">
        <p class="dialogo">socorro1</p>
        <div class="bot-opc">
          <button type="button" onclick="vaiPara('gustavo-5')" class="opcao">exemplo3.1</button>
          <button type="button" onclick="vaiPara('gustavo-6')" class="opcao">exemplo3.2</button>
        </div>
      </div>
    </div>
    </div>
  </section>


  <section class="sheldon">
    <div id="sheldon-sair">
      <img src="images/sheldon.png" alt="Sheldon" class="personagem" />
      <div class="hud">
        <p class="dialogo">
          Beleza então, até mais tarde!
        </p>
        <div class="bot-opc">
          <button type="button" onclick="vaiPara('sala-0')" class="opcao">
            Voltar para a sala
          </button>
        </div>
      </div>
    </div>
    <div id="sheldon-0" class="cenas"><img src="images/sheldon.png" alt="Sheldon" class="personagem">
      <div class="hud">
        <p class="dialogo">Saudações, eu sou o Dr. Sheldon Cooper, Ph.D, Sc.d. Antes de começarmos, é importante
          esclarecer: não gosto de surpresas, toques ou mudanças na minha rotina. Agora, diga-me: você tem um QI
          acima de 187 ou devo ajustar minhas expectativas?</p>
        <div class="bot-opc">
          <button type="button" onclick="vaiPara('sheldon-sair')" class="opcao">Na verdade, meu QI é bem alto.
            Podemos conversar de igual para igual.</button>
          <button type="button" onclick="vaiPara('sheldon-2')" class="opcao">Eu não sei meu QI, mas prometo que
            sou esperto o bastante para te acompanhar.</button>
        </div>
      </div>
    </div>
  </section>


  <section class="house">
    <div id="house-sair">
      <img src="images/house.png" alt="DrHouse" class="personagem" />
      <div class="hud">
        <p class="dialogo">
          Beleza então, até mais tarde!
        </p>
        <div class="bot-opc">
          <button type="button" onclick="vaiPara('sala-0')" class="opcao">
            Voltar para a sala
          </button>
        </div>
      </div>
    </div>
    <div id="house-0" class="cenas"><img src="images/house.png" alt="DrHouse" class="personagem">
      <div class="hud">
        <p class="dialogo">Olha só... o candidato resolve estudar. Achei que já estivesse vendendo promessas pelo
          corredor.</p>
        <div class="bot-opc">
          <button type="button" onclick="vaiPara('house-sair')" class="opcao">Achei que você não se interessava por
            aulas.</button>
          <button type="button" onclick="vaiPara('house-2')" class="opcao">Tô aqui pra aprender, diferente dos
            meus adversários.</button>
        </div>
      </div>
    </div>
  </section>

  <script>
    function numeroAleatorio(max) {
      return Math.floor(Math.random() * max);
    }

    function aleatEntre(personagens) {
      aleatorio = numeroAleatorio(personagens.length);
      sorteado = personagens[aleatorio];
      return personagens[aleatorio];
    }

    function naoSorteados(personagens, numero){
        listaNaoSorteados = [];
      for(let i=0;i<personagens.length;i++){
        if(personagens[i]!=sorteado){
            listaNaoSorteados.push(personagens[i]);
        }
      }
      if(numero==1){
        return listaNaoSorteados[0]+"-0";
    }
    else if(numero==2){
        return listaNaoSorteados[1]+"-0";
      }
    }

    

    function trocaFundo(fundo) {
      document.getElementById("tela").style = `background-image: url(images/${fundo}.png);`
    }

    function vaiPara(cena) {
      if (cena.indexOf('-') == -1) { cena += '-0' }
      document.getElementById("tela").innerHTML = document.getElementById(cena).innerHTML;
      //console.log(cena.substr(0, cena.indexOf('-')).toLowerCase())
      salvarLogJogador(cena);
      salvarLogPers(cena);
    }

    function salvarLogPers(dialogo) {
      nome = dialogo.substr(0, dialogo.indexOf('-')).toLowerCase()
      tamanho = (personagem[nome].log).length
      fala = document.getElementById(dialogo).outerHTML
      fala = fala.split('class="dialogo">')[1]

      personagem[nome].log[tamanho] = fala.slice(0, fala.lastIndexOf('</p>'))
    }

    function salvarLogJogador(opcao) {
      nome = opcao.substr(0, opcao.indexOf('-')).toLowerCase() ;
      tamanho = (personagem[nome].log).length ;
      fala = document.querySelectorAll(`button[onclick="vaiPara('${opcao}')"]`) ;

      if (fala[0] != undefined) {
        personagem[nome].log[tamanho] = (fala[0].outerHTML.slice((fala[0].outerHTML).indexOf('>'), (fala[0].outerHTML).lastIndexOf('</'))) ;
      }
    }

    // dialogos: os números abaixo do nome do personagem são os diálogos diferentes dependendo da resposta do jogador
    //OBS: quanto maior o nível, mais rude o jogador foi com o personagem
    personagem = {
      sheldon: {
        nome: "Sheldon",
        snome: "Cooper",
        relacionamento: 40,
        log: []
      },
      messi: {
        nome: "Lionel",
        snome: "Messi",
        relacionamento: 60,
        log: []
      },
      house: {
        nome: "Dr.",
        snome: "House",
        relacionamento: 30,
        log: []
      },
      davi: {
        nome: "Davi",
        snome: "Brito",
        relacionamento: 70,
        log: []
      },
      alanpa: {
        nome: "Alan",
        snome: "Patrick",
        relacionamento: 60,
        log: []
      },
      bigolin: {
        nome: "Marcio",
        snome: "Bigolin",
        relacionamento: 75,
        log: []
      },
      theo: {
        nome: "Theo",
        snome: "Petrusch",
        relacionamento: 65,
        log: []
      },

      vinicius: {
        nome: "Vinicius",
        snome: "Colussi",
        relacionamento: 65,
        log: []
      },

      gustavo: {
        nome: "Gustavo",
        snome: "Gonçalves",
        relacionamento: 70,
        log: []
      },
      enzo: {
        nome: "Enzo",
        snome: "Ferreira",
        relacionamento: 65,
        log: []
      },

    }


    //Cenas e quais personagens aparece em cada uma delas
    cenas = {
      sala: ["gustavo","sheldon","house"],
      patio: ["messi", "alanpa"]
    }
  </script>
</body>

</html>
